<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Value Assessment Protocol</title>
  <link rel="stylesheet" href="styles/main.css">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  <!-- Inline script to unlock audio before page loads -->
  <script>
    // Create and play a silent audio track to unlock audio on iOS
    window.AudioContext = window.AudioContext || window.webkitAudioContext;
    
    function unlockAudio() {
      if (!window.audioContextUnlocked) {
        try {
          const audioCtx = new AudioContext();
          const audioElement = document.createElement('audio');
          audioElement.setAttribute('src', 'data:audio/wav;base64,UklGRigAAABXQVZFZm10IBIAAAABAAEARKwAAIhYAQACABAAAABkYXRhAgAAAAEA');
          audioElement.setAttribute('autoplay', 'true');
          audioElement.setAttribute('muted', 'true');
          audioElement.style.display = 'none';
          document.body.appendChild(audioElement);
          audioElement.play();
          
          // Also create an audio context and play a silent sound
          const source = audioCtx.createBufferSource();
          source.buffer = audioCtx.createBuffer(1, 1, 22050);
          source.connect(audioCtx.destination);
          source.start(0);
          
          window.audioContextUnlocked = true;
          console.log('Audio context unlocked successfully');
        } catch (e) {
          console.log('Failed to unlock audio context:', e);
        }
      }
    }
    
    // Try to unlock audio as early as possible
    unlockAudio();
    
    // Additional unlock attempts
    document.addEventListener('DOMContentLoaded', unlockAudio);
    window.addEventListener('load', unlockAudio);
    window.addEventListener('touchstart', unlockAudio, {once: true});
    window.addEventListener('mousedown', unlockAudio, {once: true});
    window.addEventListener('keydown', unlockAudio, {once: true});
  </script>
</head>
<body>
  <header>
    <h1>Value Assessment Protocol</h1>
    <nav>
      <ul>
        <li><a href="#audio">Audio</a></li>
        <li><a href="#visual">Visual</a></li>
      </ul>
    </nav>
  </header>

  <main>
    <section id="audio">
      <div class="audio-player-container">
        <div class="waveform" id="waveform"></div>
        <div class="audio-controls">
          <button id="playPauseBtn" class="play-pause-btn">
            <i class="fas fa-play"></i>
          </button>
          <div class="audio-info">
            <h3>Value Assessment Protocol - Audio Experience</h3>
            <div class="progress-container">
              <div class="progress-bar" id="progressBar"></div>
            </div>
            <div class="time-display">
              <span id="currentTime">0:00</span> / <span id="duration">0:00</span>
            </div>
          </div>
        </div>
      </div>
      <div class="audio-description">
        <h3>About the Audio Experience</h3>
        <p>This generative audio composition explores the concept of value assessment through algorithmic sound design. The piece creates an immersive soundscape that reflects the protocols and metrics used to evaluate worth in contemporary systems. The audio explores the ability of the human mind to process and evaluate value in a digital world. It also explores the ability of machine to sound condescending and humanlike.</p>
        <p> This piece was generated with the assistance of <a href="https://sonic-pi.net/">Sonic Pi</a> and Google Gemini </p>
      </div>
    </section>

    <section id="about">
      <h2>About the Exhibition</h2>
      <p>Value Assessment Protocol explores how value assessment is manifested through generative audio and video. This exhibition invites viewers to consider how algorithmic processes interpret, evaluate, and assign worth in our digitally mediated world. How the future of value and art would look like if it were to be generated by machines. and how could machines be able to generate art that is able to evoke human emotions.</p>
    </section>

    <section id="visual">
      <h2>Visual Gallery</h2>
      <div class="gallery-container">
        <div class="gallery-view" id="visual-gallery">
          <!-- Visual works will be loaded dynamically -->
        </div>
      </div>
    </section>
  </main>

  <footer>
    <p>&copy; Value Assessment Protocol</p>
  </footer>

  <!-- Audio elements to help with autoplay -->
  <audio id="silent-audio" autoplay muted loop preload="auto">
    <source src="data:audio/mp3;base64,SUQzAwAAAAAAI1RTU0UAAAAPAAADTGF2ZjU4Ljc2LjEwMAAAAAAAAAAAAAAA//tQwAAAAAAAAAAAAAAAAAAAAAAASW5mbwAAAA8AAAACAAABIADAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDV1dXV1dXV1dXV1dXV1dXV1dXV1dXV1dXV6urq6urq6urq6urq6urq6urq6urq6urq6v////////////////////////////////8AAAAATGF2YzU4LjEzAAAAAAAAAAAAAAAAJAYHAAAAAAAAASAgwgvr/wAAAAAAAAAAAAAAAAD/+xDEAAPAAAGkAAAAIAAANIAAAARMQU1FMy45OS41VVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVV" type="audio/mp3">
  </audio>

  <script src="https://unpkg.com/wavesurfer.js@7/dist/wavesurfer.esm.js" type="module"></script>
  <script src="src/main.js" type="module"></script>
</body>
</html>